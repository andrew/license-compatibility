#!/usr/bin/env ruby


require 'license/compatibility'

options = License::CommandLine.parse(ARGV)

status = true

if options[:version]
  puts options[:version]

elsif options[:help]
  puts options[:help]

elsif options[:read]
  puts 'Not implemented'
  status = false

else
  type, args = License::CommandLine.parse_positional(ARGV)
  case type
    when 'licenses'; status = License::Compatibility.check_license_list(args)
    when 'packages'; status = License::Compatibility.check_package_licence_list(args)
    else raise 'Unrecognized args'
  end
end

exit status
